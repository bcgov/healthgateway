@using HealthGateway.Common.Data.Utils
@inherits Fluxor.Blazor.Web.Components.FluxorComponent

<MudTable Class="mt-3 rounded-b-0"
          Items="@Rows"
          AllowUnsorted="false"
          Breakpoint="@Breakpoint.Md"
          HorizontalScrollbar="true"
          Striped="true"
          Dense="true"
          data-testid="dependent-table">
    <ColGroup>
        <MudHidden Breakpoint="@Breakpoint.MdAndDown">
            <col style="width: 425px;" />
            <col style="width: 125px;" />
            <col />
            <col style="width: 125px;" />
        </MudHidden>
    </ColGroup>
    <HeaderContent>
        <MudTh>Name</MudTh>
        <MudTh>DOB</MudTh>
        <MudTh>Address</MudTh>
        <MudTh>Protected</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd data-testid="dependent-name" DataLabel="Name">@context.Name</MudTd>
        <MudTd data-testid="dependent-dob" DataLabel="DOB">@DateFormatter.ToShortDate(context.DateOfBirth)</MudTd>
        <MudTd data-testid="dependent-address" DataLabel="Address">@context.Address</MudTd>
        <MudTd data-testid="dependent-protected" DataLabel="Protected">
            <MudSwitch
                T="bool"
                Checked="@(InEditMode || context.Protected)"
                CheckedChanged="@ToggleProtectedSwitch"
                Color="@(InEditMode ? Color.Warning : Color.Success)"
                UnCheckedColor="Color.Tertiary"
                Class="mr-n4"
                ReadOnly="@InEditMode"
                data-testid="dependent-protected-switch" />
        </MudTd>
    </RowTemplate>
</MudTable>
