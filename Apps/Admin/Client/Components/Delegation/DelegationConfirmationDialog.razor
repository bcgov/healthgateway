@using HealthGateway.Admin.Client.Store.Delegation
@inherits Fluxor.Blazor.Web.Components.FluxorComponent

<MudDialog>
    <DialogContent>
        <HgBannerFeedback
            Severity="@Severity.Error"
            IsEnabled="@HasProtectError"
            TResetAction="@DelegationActions.ProtectDependentAction">
            @ProtectErrorMessage
        </HgBannerFeedback>
        <HgBannerFeedback
            Severity="@Severity.Error"
            IsEnabled="@HasUnprotectError"
            TResetAction="@DelegationActions.UnprotectDependentAction">
            @UnprotectErrorMessage
        </HgBannerFeedback>
        <MudTextField
            @ref="@ProtectReasonTextField"
            Label="Reason"
            @bind-Value="@ProtectReasonString"
            T="@string"
            MaxLength="500"
            Required="true"
            Lines="@(4)"
            data-testid="protect-reason-input" />
    </DialogContent>
    <DialogActions>
        <HgButton
            RightMargin="Breakpoint.Always"
            HorizontalMarginSize="@(HgButton.DefaultHorizontalMarginSize - 2)"
            BottomMargin="Breakpoint.Always"
            Color="@Color.Primary"
            Variant="@Variant.Text"
            OnClick="@HandleClickCancel"
            data-testid="cancel-button">
            Cancel
        </HgButton>
        <HgButton
            RightMargin="Breakpoint.Always"
            BottomMargin="Breakpoint.Always"
            Color="@Color.Primary"
            Loading="@Loading"
            Disabled="@SaveButtonDisabled"
            OnClick="@HandleClickConfirm"
            data-testid="confirm-button">
            Confirm
        </HgButton>
    </DialogActions>
</MudDialog>
