@page "/communications"
@attribute [Authorize(Roles = Roles.Admin)]
@inherits Fluxor.Blazor.Web.Components.FluxorComponent

@using HealthGateway.Admin.Client.Store.Communications

<PageTitle>Communications</PageTitle>
<HgPageHeading>Communications</HgPageHeading>

<HgBannerFeedback Severity="@Severity.Error" IsEnabled="@HasError" TResetAction="@CommunicationsActions.ResetStateAction">
    @CommunicationsState.Value.Error?.Message
</HgBannerFeedback>

@if (CommunicationsLoaded || CommunicationsLoading)
{
    <HgTabs>
        <MudTabPanel Text="Global">
            <CommunicationsTable Data="@GlobalCommunications" IsLoading="@CommunicationsLoading" />
        </MudTabPanel>
        <MudTabPanel Text="In-App">
            <CommunicationsTable Data="@InAppCommunications" IsLoading="@CommunicationsLoading" />
        </MudTabPanel>
    </HgTabs>
}
