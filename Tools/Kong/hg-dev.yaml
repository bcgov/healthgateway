_format_version: "1.1"
services:
  - name: ImmunizationService
    url: http://immunization.0bd5ad-dev.svc:8080
    plugins:
    - name: rate-limiting
      tags: [ ns.hg-dev ]
      enabled: true
      config:
        fault_tolerant: true
        hide_client_headers: false
        limit_by: consumer
        minute: 10
      enabled: true
      protocols:
      - http
      - https
    - name: cors
      tags: [ns.hg-dev]
      enabled: true
      config: 
        preflight_continue: true
    routes:
      - name: GetAll
        methods:
          - GET
        hosts:
          - hg-dev.api.gov.bc.ca
        paths:
          - /v1/api/Immunization
        strip_path: false
        plugins:
        - name: jwt-keycloak
          tags: [ns.hg-dev]
          enabled: true
          config:
            client_roles: null
            allowed_iss:
              - https://dev.oidc.gov.bc.ca/auth/realms/ff09qn3f
            run_on_preflight: true
            iss_key_grace_period: 10
            maximum_expiration: 0
            claims_to_verify:
              - exp
            consumer_match_claim_custom_id: false
            cookie_names: []
            scope: null
            uri_param_names:
              - jwt
            roles: null
            consumer_match: false
            well_known_template: https://dev.oidc.gov.bc.ca/auth/realms/ff09qn3f/.well-known/openid-configuration
            consumer_match_ignore_not_found: false
            anonymous: null
            algorithm: RS256
            realm_roles: null
            consumer_match_claim: azp
        tags:
          - OAS3_import
          - ns.hg-dev
      - name: OptionsAll
        methods:
          - OPTIONS
        hosts:
          - hg-dev.api.gov.bc.ca
        paths:
          - /v1/api/Immunization
        strip_path: false
        tags:
          - OAS3_import
          - ns.hg-dev
      - name: GetById
        methods:
          - GET
        hosts:
          - hg-dev.api.gov.bc.ca
        paths:
          - /v1/api/Immunization/(?<immunizationId>\S+)$
        strip_path: false
        plugins:
        - name: jwt-keycloak
          tags: [ns.hg-dev]
          enabled: true
          config:
            client_roles: null
            allowed_iss:
              - https://dev.oidc.gov.bc.ca/auth/realms/ff09qn3f
            run_on_preflight: true
            iss_key_grace_period: 10
            maximum_expiration: 0
            claims_to_verify:
              - exp
            consumer_match_claim_custom_id: false
            cookie_names: []
            scope: null
            uri_param_names:
              - jwt
            roles: null
            consumer_match: false
            well_known_template: https://dev.oidc.gov.bc.ca/auth/realms/ff09qn3f/.well-known/openid-configuration
            consumer_match_ignore_not_found: false
            anonymous: null
            algorithm: RS256
            realm_roles: null
            consumer_match_claim: azp
        tags:
          - OAS3_import
          - ns.hg-dev
      - name: OptionsById
        methods:
          - OPTIONS
        hosts:
          - hg-dev.api.gov.bc.ca
        paths:
          - /v1/api/Immunization/(?<immunizationId>\S+)$
        strip_path: false
        tags:
          - OAS3_import
          - ns.hg-dev
    tags:
      - OAS3_import
      - ns.hg-dev
